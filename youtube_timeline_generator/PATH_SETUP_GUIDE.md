# Windows環境でのPATH設定詳細ガイド

## 事前準備

1. **FFmpegの配置を確認**
   - `C:\ffmpeg\bin\ffmpeg.exe`が存在することを確認
   - もし違う場所に配置した場合は、その場所をメモしてください

## 方法1: GUIを使用した設定（推奨）

### ステップ1: システムのプロパティを開く

以下のいずれかの方法で開きます：

**方法A: ショートカットキー**
1. `Windows`キー + `Pause/Break`キー

**方法B: 検索から**
1. `Windows`キーを押す
2. 「環境変数」と入力
3. 「システム環境変数の編集」をクリック

**方法C: コントロールパネルから**
1. `Windows`キー + `R`
2. `control`と入力してEnter
3. 「システムとセキュリティ」→「システム」
4. 左側の「システムの詳細設定」をクリック

### ステップ2: 環境変数ダイアログを開く

1. 「システムのプロパティ」ウィンドウが開く
2. 「詳細設定」タブを選択（既に選択されている場合が多い）
3. 下部の「環境変数(N)...」ボタンをクリック

### ステップ3: PATH変数を編集

1. 「環境変数」ウィンドウが開く
2. **下側の「システム環境変数」**セクションを見る（上側のユーザー環境変数ではない）
3. リストから「Path」を探してクリックで選択
4. 「編集(I)...」ボタンをクリック

### ステップ4: FFmpegのパスを追加

1. 「環境変数名の編集」ウィンドウが開く
2. 右側の「新規(N)」ボタンをクリック
3. 新しい行に`C:\ffmpeg\bin`と入力
4. 「OK」をクリック

### ステップ5: 設定を保存

1. 「環境変数」ウィンドウで「OK」をクリック
2. 「システムのプロパティ」ウィンドウで「OK」をクリック
3. 全てのウィンドウを閉じる

## 方法2: コマンドラインを使用した設定

### 管理者権限でコマンドプロンプトを開く

1. `Windows`キーを押す
2. 「cmd」と入力
3. 「コマンドプロンプト」を右クリック
4. 「管理者として実行」を選択

### PATHに追加するコマンド

```cmd
setx /M PATH "%PATH%;C:\ffmpeg\bin"
```

**注意**: このコマンドは既存のPATHに追加します。

## 設定の確認方法

### 1. 新しいコマンドプロンプトを開く
**重要**: 設定前に開いていたコマンドプロンプトでは反映されません！

### 2. 確認コマンドを実行

```cmd
echo %PATH%
```
出力された内容に`C:\ffmpeg\bin`が含まれているか確認

### 3. FFmpegの動作確認

```cmd
ffmpeg -version
```

正常に表示されれば成功です。

## よくあるトラブルと解決方法

### 「'ffmpeg' は内部コマンドまたは外部コマンド...」エラー

1. **新しいコマンドプロンプトで試す**
   - 既存のウィンドウを全て閉じて新しく開く

2. **パスの確認**
   ```cmd
   where ffmpeg
   ```
   このコマンドでffmpeg.exeの場所が表示されるか確認

3. **パスの区切り文字を確認**
   - セミコロン（;）で区切られているか確認
   - 最後にセミコロンは不要

### パスに日本語が含まれる場合

日本語を含むパスは避けることを推奨しますが、必要な場合：
1. ダブルクォーテーションで囲む
2. 例: `"C:\ユーザー\ffmpeg\bin"`

### 設定が反映されない場合

1. **PCを再起動**
   - 最も確実な方法

2. **PowerShellで確認**
   ```powershell
   $env:Path -split ';'
   ```
   これで全てのPATHが一覧表示されます

## 代替手段：一時的なPATH設定

プロジェクトでのみ使用する場合：

### バッチファイルを作成
`run_with_ffmpeg.bat`として保存：
```batch
@echo off
set PATH=%PATH%;C:\ffmpeg\bin
python src\main.py %*
```

使用方法：
```cmd
run_with_ffmpeg.bat https://www.youtube.com/watch?v=xxxxx
```

## 設定後の使用方法

1. 新しいコマンドプロンプトを開く
2. プロジェクトディレクトリに移動
   ```cmd
   cd C:\Users\ya211\OneDrive\ドキュメント\movie_auto_screenshot\youtube_timeline_generator
   ```
3. プログラムを実行
   ```cmd
   python src/main.py https://www.youtube.com/watch?v=xxxxx
   ```