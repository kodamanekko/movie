# YouTube動画タイムライン自動生成ツール 要件定義書

## 1. プロジェクト概要

### 1.1 目的
YouTube動画（特に技術系動画）の内容を自動解析し、話題や場面が切り替わるポイントを検出して、タイムライン（目次）を自動生成するツールの開発。

### 1.2 背景
- 長時間の技術系動画では、特定の情報を探すのに時間がかかる
- 手動でタイムスタンプを作成するのは労力が大きい
- 動画の構造を把握してから視聴したいニーズがある

### 1.3 スコープ
- 対象: YouTube上の技術系動画（プログラミング、技術解説、チュートリアル等）
- 対象外: ライブ配信、音楽動画、映画等のエンターテインメントコンテンツ

## 2. 機能要件

### 2.1 基本機能

#### 2.1.1 動画情報取得
- YouTube URLからの動画メタデータ取得
- 動画タイトル、説明文、再生時間の取得

#### 2.1.2 セクション検出
検出対象：
- 新しいトピックの開始（「次は〜について」等のフレーズ）
- 画面の大きな変化（スライド切り替え、IDE/ブラウザの切り替え）
- デモンストレーションの開始/終了
- 重要概念の説明開始
- Q&Aセクション
- まとめ/結論部分

#### 2.1.3 タイムライン生成
- 各セクションのタイムスタンプ生成
- セクション内容の要約（20-30文字程度）
- 階層構造の認識（大セクション/小セクション）

#### 2.1.4 出力機能
- テキストファイル形式での出力（必須）
- 追加フォーマット対応（JSON、Markdown等）は将来拡張として検討

### 2.2 出力フォーマット仕様

```text
YouTube動画タイムライン
========================
URL: [YouTube URL]
タイトル: [動画タイトル]
総再生時間: [HH:MM:SS]
生成日時: [YYYY-MM-DD HH:MM:SS]

タイムライン
========================
00:00 - イントロダクション
02:15 - 環境構築
  02:30 - 必要なツールのインストール
  04:45 - 初期設定
08:00 - 基本概念の解説
  08:15 - 変数とデータ型
  12:30 - 制御構文
15:45 - 実践コーディング
  16:00 - サンプルプログラムの作成
  20:30 - エラー処理の実装
25:00 - まとめ
```

## 3. 非機能要件

### 3.1 パフォーマンス要件
- 処理時間:
  - 10分動画: 1-2分以内
  - 30分動画: 3-5分以内
  - 60分動画: 5-10分以内
- メモリ使用量: 最大4GB
- ストレージ: 一時ファイル用に動画サイズの2倍程度

### 3.2 品質要件
- セクション検出精度: 主要な切り替わりポイントの80%以上を検出
- 誤検出率: 10%以下
- タイムスタンプ精度: 実際の切り替わりポイントから±5秒以内

### 3.3 信頼性要件
- エラーハンドリング: ネットワークエラー、処理エラーの適切な処理
- リトライ機能: ネットワークエラー時の自動リトライ（最大3回）

### 3.4 使いやすさ要件
- CLI（コマンドラインインターフェース）での実行
- 進捗表示機能
- わかりやすいエラーメッセージ

### 3.5 セキュリティ・プライバシー要件
- ローカル処理の完結（外部APIへの動画データ送信なし）
- 一時ファイルの適切な削除
- ユーザーデータの収集なし

### 3.6 互換性要件
- OS: Windows 10/11, macOS 10.15以降, Linux（Ubuntu 20.04以降）
- Python: 3.8以降
- 必要な外部ツール: FFmpeg

## 4. 技術仕様

### 4.1 使用技術
- **プログラミング言語**: Python 3.8+
- **動画処理**: 
  - yt-dlp: YouTube動画情報取得
  - FFmpeg: 音声抽出
- **音声認識**: OpenAI Whisper（ローカル実行）
- **自然言語処理**:
  - トピックセグメンテーション
  - キーワード抽出
  - 文境界検出
- **映像解析**（オプション）: OpenCV（シーン変化検出）

### 4.2 システム構成
```
├── 入力処理モジュール（URL解析、検証）
├── 動画ダウンロードモジュール
├── 音声抽出モジュール
├── 音声認識モジュール（Whisper）
├── テキスト解析モジュール
│   ├── トピック分割
│   └── セクション境界検出
├── タイムライン生成モジュール
└── 出力モジュール
```

## 5. 制約事項

### 5.1 技術的制約
- YouTube利用規約の遵守
- 著作権保護（動画の保存は一時的な処理のみ）
- ローカルマシンの性能に依存した処理速度

### 5.2 対応言語
- 第1フェーズ: 日本語、英語
- 将来的な拡張: その他の言語

## 6. 今後の拡張候補

### 6.1 機能拡張
- リアルタイム処理モード
- 動画内検索機能
- 複数動画の一括処理
- Webインターフェース
- ブラウザ拡張機能

### 6.2 出力拡張
- HTMLレポート生成
- 動画プレーヤー連携
- サムネイル付きタイムライン

## 7. 成功基準

### 7.1 最小機能要件（MVP）
- YouTube URLを入力として受け取る
- 音声認識によるテキスト化
- 基本的なセクション分割
- テキストファイルでのタイムライン出力

### 7.2 品質基準
- 一般的な技術系動画で80%以上の主要セクションを検出
- 処理完了率95%以上
- ユーザーが手動修正なしで使えるレベルの精度

## 8. プロジェクトフェーズ

### Phase 1: MVP開発（現在のターゲット）
- 基本的な音声認識ベースのセクション検出
- テキスト出力機能

### Phase 2: 精度向上
- 映像解析の追加
- より高度なNLP処理

### Phase 3: 機能拡張
- 複数フォーマット対応
- バッチ処理
- UI改善